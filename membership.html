<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Member Login | Elite AI Credit Repair</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Elite AI Credit Repair member login. Create your account, sign in, reset your password, and access members-only credit education."
  />
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container nav">
      <div class="brand">
        <img src="assets/elite_logo.png" alt="Elite AI Credit Repair Logo" class="logo" />
        <div class="brand-text">
          <span class="brand-name">Elite <strong>AI</strong> Credit Repair</span>
          <span class="brand-tagline">
            <strong>Smart Laws ¬∑ Real Strategy ¬∑ Human + AI</strong>
          </span>
        </div>
      </div>
      <nav class="main-nav">
        <a href="index.html"><strong>Home</strong></a>
        <a href="book.html"><strong>Digital Book</strong></a>
        <a href="services.html"><strong>Services</strong></a>
        <a href="contact.html"><strong>Contact</strong></a>
        <a href="membership.html" class="active"><strong>Member Login</strong></a>
      </nav>
    </div>
  </header>

  <main>
    <!-- AUTH CONTAINER -->
    <section class="section">
      <div class="container">
        <div class="auth-container">
          <h2>Member Login</h2>
          <p class="small-bold" style="text-align:center; margin-bottom:1.2rem;">
            Sign in to manage your plan, unlock members-only content, and get smarter credit guidance.
          </p>

          <!-- LOGIN -->
          <div id="login-section">
            <h3 style="margin-bottom:0.6rem;">Log In</h3>

            <label for="login-email">Email</label>
            <input type="email" id="login-email" placeholder="you@example.com" />

            <label for="login-password">Password</label>
            <input type="password" id="login-password" placeholder="Your password" />

            <button id="login-btn" class="btn-primary" type="button" style="margin-top:1rem;">
              <strong>Log In</strong>
            </button>
            <div id="login-error" class="error"></div>
          </div>

          <hr style="margin:1.8rem 0; border:none; border-top:1px solid rgba(148,163,184,0.3);" />

          <!-- SIGNUP -->
          <div id="signup-section">
            <h3 style="margin-bottom:0.6rem;">Create an Account</h3>

            <label for="signup-email">Email</label>
            <input type="email" id="signup-email" placeholder="you@example.com" />

            <label for="signup-password">Password</label>
            <input type="password" id="signup-password" placeholder="Choose a strong password" />

            <button id="signup-btn" class="btn-secondary" type="button" style="margin-top:1rem;">
              <strong>Create Account</strong>
            </button>
            <div id="signup-error" class="error"></div>
          </div>

          <hr style="margin:1.8rem 0; border:none; border-top:1px solid rgba(148,163,184,0.3);" />

          <!-- PASSWORD RESET -->
          <div id="reset-section">
            <h3 style="margin-bottom:0.6rem;">Forgot Your Password?</h3>
            <p class="small-bold">
              Enter your email and we‚Äôll send you a secure reset link through Firebase.
            </p>

            <label for="reset-email">Email for Password Reset</label>
            <input type="email" id="reset-email" placeholder="you@example.com" />

            <button id="reset-btn" class="btn-outline" type="button" style="margin-top:0.8rem;">
              <strong>Send Password Reset Email</strong>
            </button>
            <div id="reset-message" class="success"></div>
          </div>

          <hr style="margin:1.8rem 0; border:none; border-top:1px solid rgba(148,163,184,0.3);" />

          <!-- STATUS + EMAIL VERIFICATION + LOGOUT -->
          <p id="auth-status-text" class="success" style="margin-top:0;"></p>

          <button
            id="verify-email-btn"
            class="btn-secondary"
            type="button"
            style="display:none; margin-top:0.6rem;"
          >
            <strong>Resend Verification Email</strong>
          </button>

          <button
            id="logout-btn"
            class="btn-outline logout-btn"
            type="button"
            style="display:none; margin-top:0.6rem;"
          >
            <strong>Log Out</strong>
          </button>
        </div>
      </div>
    </section>

    <!-- MEMBER-ONLY CONTENT EXAMPLE (protected) -->
    <section id="member-content" class="section section-alt" style="display:none;">
      <div class="container">
        <h2><strong>Members-Only Snapshot Area</strong></h2>
        <p class="hero-sub">
          <strong>
            Once you‚Äôre logged in, this section becomes your private area. You can put snapshots,
            custom letters, or a link to a separate members-area.html here.
          </strong>
        </p>
        <div class="card">
          <p>
            <strong>Idea:</strong> Use this space for:
          </p>
          <ul class="hero-list">
            <li>Downloadable snapshot PDFs for each client.</li>
            <li>Private training videos or letter libraries.</li>
            <li>Advanced dispute scripts and timelines.</li>
          </ul>
          <p class="hero-note">
            <strong>
              This section is hidden until Firebase confirms a logged-in user ‚Äî that‚Äôs your
              ‚Äúprotected content‚Äù example.
            </strong>
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>
        <strong>&copy; <span id="year-membership"></span> Elite AI Credit Repair.</strong>
        <strong> All rights reserved.</strong>
      </p>
    </div>
  </footer>

  <!-- üîê Firebase Auth Logic JUST for this page -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signOut,
      onAuthStateChanged,
      sendPasswordResetEmail,
      sendEmailVerification
    } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

    /* ============================================
     * 1. Your Firebase Config
     *    üëâ Replace ALL values with your real config
     *       from Firebase Console ‚Üí Project Settings
     * ============================================ */
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY_HERE",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    /* DOM ELEMENTS */
    const loginEmailEl = document.getElementById("login-email");
    const loginPasswordEl = document.getElementById("login-password");
    const loginBtn = document.getElementById("login-btn");
    const loginErrorEl = document.getElementById("login-error");

    const signupEmailEl = document.getElementById("signup-email");
    const signupPasswordEl = document.getElementById("signup-password");
    const signupBtn = document.getElementById("signup-btn");
    const signupErrorEl = document.getElementById("signup-error");

    const resetEmailEl = document.getElementById("reset-email");
    const resetBtn = document.getElementById("reset-btn");
    const resetMsgEl = document.getElementById("reset-message");

    const statusText = document.getElementById("auth-status-text");
    const verifyEmailBtn = document.getElementById("verify-email-btn");
    const logoutBtn = document.getElementById("logout-btn");

    const memberContent = document.getElementById("member-content");

    /* ============================================
     * 2. SIGNUP
     * ============================================ */
    if (signupBtn) {
      signupBtn.addEventListener("click", () => {
        const email = signupEmailEl.value.trim();
        const password = signupPasswordEl.value.trim();
        signupErrorEl.textContent = "";

        if (!email || !password) {
          signupErrorEl.textContent = "Please enter an email and password.";
          return;
        }

        createUserWithEmailAndPassword(auth, email, password)
          .then((cred) => {
            signupErrorEl.textContent = "";
            alert("Account created! We just sent a verification email. Please check your inbox.");
            if (cred.user) {
              sendEmailVerification(cred.user).catch(() => {
                // silently ignore for now
              });
            }
          })
          .catch((error) => {
            signupErrorEl.textContent = error.message || "Error creating account.";
          });
      });
    }

    /* ============================================
     * 3. LOGIN
     * ============================================ */
    if (loginBtn) {
      loginBtn.addEventListener("click", () => {
        const email = loginEmailEl.value.trim();
        const password = loginPasswordEl.value.trim();
        loginErrorEl.textContent = "";

        if (!email || !password) {
          loginErrorEl.textContent = "Please enter your email and password.";
          return;
        }

        signInWithEmailAndPassword(auth, email, password).catch((error) => {
          loginErrorEl.textContent = error.message || "Error logging in.";
        });
      });
    }

    /* ============================================
     * 4. PASSWORD RESET
     * ============================================ */
    if (resetBtn) {
      resetBtn.addEventListener("click", () => {
        const email = (resetEmailEl.value || loginEmailEl.value || "").trim();
        resetMsgEl.textContent = "";

        if (!email) {
          resetMsgEl.textContent = "Enter an email above so we know where to send the link.";
          return;
        }

        sendPasswordResetEmail(auth, email)
          .then(() => {
            resetMsgEl.textContent = "Password reset email sent. Check your inbox and spam folder.";
          })
          .catch((error) => {
            resetMsgEl.textContent = error.message || "Error sending reset email.";
          });
      });
    }

    /* ============================================
     * 5. LOGOUT
     * ============================================ */
    if (logoutBtn) {
      logoutBtn.addEventListener("click", () => {
        signOut(auth).catch(() => {
          // ignore for now
        });
      });
    }

    /* ============================================
     * 6. RESEND EMAIL VERIFICATION
     * ============================================ */
    if (verifyEmailBtn) {
      verifyEmailBtn.addEventListener("click", () => {
        const user = auth.currentUser;
        if (!user) return;

        sendEmailVerification(user)
          .then(() => {
            alert("Verification email re-sent. Please check your inbox.");
          })
          .catch(() => {
            alert("Could not send verification email right now. Try again later.");
          });
      });
    }

    /* ============================================
     * 7. AUTH STATE LISTENER (Protect + UI)
     * ============================================ */
    onAuthStateChanged(auth, (user) => {
      if (user) {
        const verified = user.emailVerified;
        statusText.innerHTML = verified
          ? `You are logged in as <strong>${user.email}</strong>.`
          : `You are logged in as <strong>${user.email}</strong> ‚Äì please verify your email.`;

        logoutBtn.style.display = "inline-flex";
        memberContent.style.display = "block";

        if (!verified) {
          verifyEmailBtn.style.display = "inline-flex";
        } else {
          verifyEmailBtn.style.display = "none";
        }
      } else {
        statusText.textContent = "";
        logoutBtn.style.display = "none";
        verifyEmailBtn.style.display = "none";
        memberContent.style.display = "none";
      }
    });
  </script>
</body>
</html>
